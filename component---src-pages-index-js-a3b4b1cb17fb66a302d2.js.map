{"version":3,"sources":["webpack:///./src/effects/fireworks.js","webpack:///./src/pages/index.js"],"names":["SCREEN_WIDTH","window","innerWidth","SCREEN_HEIGHT","innerHeight","mousePos","x","y","canvas","context","particles","rockets","init","canvasRef","getContext","width","height","setInterval","launch","loop","length","rocket","Rocket","explosionColor","Math","floor","random","vel","size","shrink","gravity","push","launchFrom","fillStyle","fillRect","existingRockets","i","update","render","distance","sqrt","pow","pos","randomChance","explode","existingParticles","exists","shift","Particle","this","resistance","flick","alpha","fade","color","apply","prototype","c","save","globalCompositeOperation","r","gradient","createRadialGradient","addColorStop","beginPath","arc","PI","closePath","fill","restore","constructor","count","particle","angle","speed","cos","sin","y2021","Date","IndexPage","state","now","display","special","white","switcher","show","React","createRef","componentDidMount","newNow","difference","getHours","getMinutes","getSeconds","setState","setTimeout","initFireworks","current","className","ref","Component"],"mappings":"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","file":"component---src-pages-index-js-a3b4b1cb17fb66a302d2.js","sourcesContent":["var SCREEN_WIDTH = typeof window !== \"undefined\" && window.innerWidth,\n  SCREEN_HEIGHT = typeof window !== \"undefined\" && window.innerHeight,\n  mousePos = {\n    x: typeof window !== \"undefined\" && window.innerWidth / 2,\n    y: 300,\n  },\n  // create canvas\n  canvas = null,\n  context = null,\n  particles = [],\n  rockets = [],\n  MAX_PARTICLES = 400,\n  colorCode = 0\n\n// init\n\nexport default function init(canvasRef) {\n  canvas = canvasRef\n  context = canvas.getContext(\"2d\")\n  canvas.width = SCREEN_WIDTH\n  canvas.height = SCREEN_HEIGHT\n  setInterval(launch, 800)\n  setInterval(loop, 1000 / 50)\n}\n\n// update mouse position\n\nfunction launch() {\n  launchFrom(mousePos.x)\n}\n\nfunction launchFrom(x) {\n  if (rockets.length < 10) {\n    var rocket = new Rocket(x)\n    rocket.explosionColor = Math.floor((Math.random() * 360) / 10) * 10\n    rocket.vel.y = Math.random() * -3 - 4\n    rocket.vel.x = Math.random() * 6 - 3\n    rocket.size = 8\n    rocket.shrink = 0.999\n    rocket.gravity = 0.01\n    rockets.push(rocket)\n  }\n}\n\nfunction loop() {\n  // update screen size\n  if (SCREEN_WIDTH != (typeof window !== \"undefined\" && window.innerWidth)) {\n    canvas.width = SCREEN_WIDTH =\n      typeof window !== \"undefined\" && window.innerWidth\n  }\n  if (SCREEN_HEIGHT != (typeof window !== \"undefined\" && window.innerHeight)) {\n    canvas.height = SCREEN_HEIGHT =\n      typeof window !== \"undefined\" && window.innerHeight\n  }\n\n  // clear canvas\n  context.fillStyle = \"rgba(0, 0, 0, 0.05)\"\n  context.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT)\n\n  var existingRockets = []\n\n  for (var i = 0; i < rockets.length; i++) {\n    // update and render\n    rockets[i].update()\n    rockets[i].render(context)\n\n    // calculate distance with Pythagoras\n    var distance = Math.sqrt(\n      Math.pow(mousePos.x - rockets[i].pos.x, 2) +\n        Math.pow(mousePos.y - rockets[i].pos.y, 2)\n    )\n\n    // random chance of 1% if rockets is above the middle\n    var randomChance =\n      rockets[i].pos.y < (SCREEN_HEIGHT * 2) / 3\n        ? Math.random() * 100 <= 1\n        : false\n\n    /* Explosion rules\n             - 80% of screen\n            - going down\n            - close to the mouse\n            - 1% chance of random explosion\n        */\n    if (\n      rockets[i].pos.y < SCREEN_HEIGHT / 5 ||\n      rockets[i].vel.y >= 0 ||\n      distance < 50 ||\n      randomChance\n    ) {\n      rockets[i].explode()\n    } else {\n      existingRockets.push(rockets[i])\n    }\n  }\n\n  rockets = existingRockets\n\n  var existingParticles = []\n\n  for (var i = 0; i < particles.length; i++) {\n    particles[i].update()\n\n    // render and save particles that can be rendered\n    if (particles[i].exists()) {\n      particles[i].render(context)\n      existingParticles.push(particles[i])\n    }\n  }\n\n  // update array with existing particles - old particles should be garbage collected\n  particles = existingParticles\n\n  while (particles.length > MAX_PARTICLES) {\n    particles.shift()\n  }\n}\n\nfunction Particle(pos) {\n  this.pos = {\n    x: pos ? pos.x : 0,\n    y: pos ? pos.y : 0,\n  }\n  this.vel = {\n    x: 0,\n    y: 0,\n  }\n  this.shrink = 0.97\n  this.size = 2\n\n  this.resistance = 1\n  this.gravity = 0\n\n  this.flick = false\n\n  this.alpha = 1\n  this.fade = 0\n  this.color = 0\n}\n\nParticle.prototype.update = function () {\n  // apply resistance\n  this.vel.x *= this.resistance\n  this.vel.y *= this.resistance\n\n  // gravity down\n  this.vel.y += this.gravity\n\n  // update position based on speed\n  this.pos.x += this.vel.x\n  this.pos.y += this.vel.y\n\n  // shrink\n  this.size *= this.shrink\n\n  // fade out\n  this.alpha -= this.fade\n}\n\nParticle.prototype.render = function (c) {\n  if (!this.exists()) {\n    return\n  }\n\n  c.save()\n\n  c.globalCompositeOperation = \"lighter\"\n\n  var x = this.pos.x,\n    y = this.pos.y,\n    r = this.size / 2\n\n  var gradient = c.createRadialGradient(x, y, 0.1, x, y, r)\n  gradient.addColorStop(0.1, \"rgba(255,255,255,\" + this.alpha + \")\")\n  gradient.addColorStop(\n    0.8,\n    \"hsla(\" + this.color + \", 100%, 50%, \" + this.alpha + \")\"\n  )\n  gradient.addColorStop(1, \"hsla(\" + this.color + \", 100%, 50%, 0.1)\")\n\n  c.fillStyle = gradient\n\n  c.beginPath()\n  c.arc(\n    this.pos.x,\n    this.pos.y,\n    this.flick ? Math.random() * this.size : this.size,\n    0,\n    Math.PI * 2,\n    true\n  )\n  c.closePath()\n  c.fill()\n\n  c.restore()\n}\n\nParticle.prototype.exists = function () {\n  return this.alpha >= 0.1 && this.size >= 1\n}\n\nfunction Rocket(x) {\n  Particle.apply(this, [\n    {\n      x: x,\n      y: SCREEN_HEIGHT,\n    },\n  ])\n\n  this.explosionColor = 0\n}\n\nRocket.prototype = new Particle()\nRocket.prototype.constructor = Rocket\n\nRocket.prototype.explode = function () {\n  var count = Math.random() * 10 + 80\n\n  for (var i = 0; i < count; i++) {\n    var particle = new Particle(this.pos)\n    var angle = Math.random() * Math.PI * 2\n\n    // emulate 3D effect by using cosine and put more particles in the middle\n    var speed = Math.cos((Math.random() * Math.PI) / 2) * 15\n\n    particle.vel.x = Math.cos(angle) * speed\n    particle.vel.y = Math.sin(angle) * speed\n\n    particle.size = 10\n\n    particle.gravity = 0.2\n    particle.resistance = 0.92\n    particle.shrink = Math.random() * 0.05 + 0.93\n\n    particle.flick = true\n    particle.color = this.explosionColor\n\n    particles.push(particle)\n  }\n}\n\nRocket.prototype.render = function (c) {\n  if (!this.exists()) {\n    return\n  }\n\n  c.save()\n\n  c.globalCompositeOperation = \"lighter\"\n\n  var x = this.pos.x,\n    y = this.pos.y,\n    r = this.size / 2\n\n  var gradient = c.createRadialGradient(x, y, 0.1, x, y, r)\n  gradient.addColorStop(0.1, \"rgba(255, 255, 255 ,\" + this.alpha + \")\")\n  gradient.addColorStop(1, \"rgba(0, 0, 0, \" + this.alpha + \")\")\n\n  c.fillStyle = gradient\n\n  c.beginPath()\n  c.arc(\n    this.pos.x,\n    this.pos.y,\n    this.flick ? (Math.random() * this.size) / 2 + this.size / 2 : this.size,\n    0,\n    Math.PI * 2,\n    true\n  )\n  c.closePath()\n  c.fill()\n\n  c.restore()\n}\n","import React from \"react\"\nimport initFireworks from \"../effects/fireworks\"\n\nconst debug = false\n\n//const y2021 = new Date(\"1/1/2021\")\n\nconst y2021 = new Date(\"Thu Dec 31 2020 22:2:00 GMT+0100 (GMT+01:00)\")\n\nexport default class IndexPage extends React.Component {\n  state = {\n    now: new Date(),\n    display: \"2021\",\n    special: false,\n    white: false,\n    switcher: false,\n    show: true,\n  }\n  canvas = React.createRef()\n  componentDidMount = () => {\n    setInterval(() => {\n      const newNow = new Date()\n      const difference = new Date(y2021 - newNow)\n      let display = \"2021\"\n      let special = false\n\n      display = `${difference.getHours()}:${difference.getMinutes()}'${difference.getSeconds()}`\n\n      if (y2021 - newNow < 10000) {\n        special = true\n        display = difference.getSeconds()\n      }\n\n      if (y2021 - newNow < 0) {\n        display = \"Happy new year!\"\n        if (!this.state.switcher) {\n          this.setState({ switcher: true })\n          setTimeout(() => {\n            initFireworks(this.canvas.current)\n            setTimeout(() => {\n              this.setState({ show: false })\n            }, 3000)\n          }, 5000)\n        }\n        this.setState({ white: true })\n      }\n      this.setState({ now: new Date(), display, special })\n    }, 250)\n  }\n  render() {\n    return (\n      <div>\n        <div className=\"px-44 py-80 text-center z-40\">\n          {this.state.show ? (\n            <h1\n              className={`z-40 text-3xl md:text-7xl font-bold${\n                this.state.special\n                  ? \" text-red-700 md:text-7xl lg:text-9xl\"\n                  : \"\"\n              }${\n                this.state.white ? \" text-white md:text-7xl lg:text-9xl\" : \"\"\n              }`}\n            >\n              {this.state.display}\n            </h1>\n          ) : null}\n          {debug ? (\n            <p>\n              Now: {this.state.now.toString()}\n              <br />\n              Target: {y2021.toString()}\n              <br />\n              Difference: {(y2021 - this.state.now).toString()}ms\n            </p>\n          ) : null}\n        </div>\n        <canvas className=\"z-0 absolute top-0\" ref={this.canvas}></canvas>\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}